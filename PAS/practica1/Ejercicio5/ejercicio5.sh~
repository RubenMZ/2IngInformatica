#!/bin/bash
function imprimeFic(){
	if [ -f $x ]
	then
		if [ -x $x ]
		then
			echo "$x; $(stat -c %s $x); $(stat -c %h $x); $(stat -c %A $x); 1;"
		else
			echo "$x; $(stat -c %s $x); $(stat -c %h $x); $(stat -c %A $x); 0;"
		fi
	fi

}

if [ $# -eq 1 ] || [ $# -eq 2 ]
then
	if [ -d $1 ]
	then
		if [ $#==2 ]
		then
			for x in $(find $1 -name "*$2*" -ls | sort -k 7)
			do
			y=$(awk '{print 11}')
			imprimeFic $y
			done
		else
			for x in $(find $1 -ls | sort -k 7)
			do
			y=$(awk '{print 11}')
			imprimeFic $y
			done	
		fi	
	else
		echo "El primer arg no es un directorio"
	fi
else
	echo "Argumentos mal <$0><directorio><cadena>"
fi
